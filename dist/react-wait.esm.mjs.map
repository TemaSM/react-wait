{"version":3,"file":"react-wait.esm.mjs","sources":["../src/api.js","../src/index.js"],"sourcesContent":["export const anyWaiting = waiters => waiters.length > 0;\n\nexport const isWaiting = (waiters, waiter) => waiters.includes(waiter);\n\nexport const startWaiting = (waiters, waiter) => {\n  if (isWaiting(waiters, waiter)) return waiters;\n  return [...waiters, waiter];\n};\n\nexport const endWaiting = (waiters, waiter) => {\n  return waiters.filter(w => w !== waiter);\n};\n","import { useState, createContext, useContext } from \"react\";\nimport { anyWaiting, isWaiting, startWaiting, endWaiting } from \"./api\";\n\nconst WaitingContext = createContext();\n\nfunction Wait(props) {\n  const context = useContext(WaitingContext);\n  return context.waiters.includes(props.on) ? props.fallback : props.children;\n}\n\nexport function Waiter(props) {\n  const [waiters, setWaiters] = useState([]);\n\n  return (\n    <WaitingContext.Provider\n      value={{\n        waiters,\n        createWaitingContext: waiter => ({\n          isWaiting: () => isWaiting(waiters, waiter),\n          startWaiting: () => setWaiters(startWaiting(waiters, waiter)),\n          endWaiting: () => setWaiters(endWaiting(waiters, waiter)),\n          Wait: props => <Wait on={waiter} {...props} />\n        }),\n        anyWaiting: () => anyWaiting(waiters),\n        isWaiting: waiter => isWaiting(waiters, waiter),\n        startWaiting(waiter) {\n          setWaiters(startWaiting(waiters, waiter));\n        },\n        endWaiting(waiter) {\n          setWaiters(endWaiting(waiters, waiter));\n        }\n      }}\n    >\n      {props.children}\n    </WaitingContext.Provider>\n  );\n}\n\nexport function useWait() {\n  const context = useContext(WaitingContext);\n  return {\n    ...context,\n    Wait\n  };\n}\n"],"names":["isWaiting","waiters","waiter","includes","startWaiting","concat","endWaiting","filter","w","WaitingContext","createContext","Wait","props","useContext","on","fallback","children","Waiter","useState","_useState","setWaiters","React","createElement","Provider","value","createWaitingContext","_Wait","_extends","anyWaiting","length","useWait"],"mappings":"oRAAO,IAEMA,EAAY,SAACC,EAASC,UAAWD,EAAQE,SAASD,IAElDE,EAAe,SAACH,EAASC,GACpC,OAAIF,EAAUC,EAASC,GAAgBD,EACvC,GAAAI,OAAWJ,EAASC,CAAAA,KAGTI,EAAa,SAACL,EAASC,GAClC,OAAOD,EAAQM,OAAO,SAAAC,GAAKA,OAAAA,IAAMN,KCP7BO,eAAiBC,IAEvB,SAASC,EAAKC,GAEZ,OADgBC,EAAWJ,GACZR,QAAQE,SAASS,EAAME,IAAMF,EAAMG,SAAWH,EAAMI,SAG9D,SAASC,EAAOL,GACrB,IAA8BM,EAAAA,EAAS,IAAhCjB,EAAPkB,EAAA,GAAgBC,EAAhBD,EAAA,gBAEA,OACEE,MAAAC,cAACb,EAAec,SAAhB,CACEC,MAAO,CACLvB,QAAAA,EACAwB,qBAAsB,SAAAvB,GAAM,MAAK,CAC/BF,UAAW,WAAA,OAAMA,EAAUC,EAASC,IACpCE,aAAc,WAAMgB,OAAAA,EAAWhB,EAAaH,EAASC,KACrDI,WAAY,WAAA,OAAMc,EAAWd,EAAWL,EAASC,KACjDS,KAAM,SAAAC,gBAAS,OAAAS,MAAAC,cAACI,EAADC,EAAA,CAAMb,GAAIZ,GAAYU,OAEvCgB,WAAY,WAAMA,ODvBA,SAAA3B,GAAWA,OAAAA,EAAQ4B,OAAS,ECuB5BD,CAAW3B,IAC7BD,UAAW,SAAAE,GAAUF,OAAAA,EAAUC,EAASC,IACxCE,aAVK,SAUQF,GACXkB,EAAWhB,EAAaH,EAASC,KAEnCI,WAbK,SAaMJ,GACTkB,EAAWd,EAAWL,EAASC,OAIlCU,EAAMI,UAKN,SAASc,IAEd,OAAAH,EAAA,GADgBd,EAAWJ,GAC3B,CAEEE,KAAAA"}